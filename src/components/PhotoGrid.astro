---
interface PhotoItem {
  src: string;
  alt: string;
  label?: string;
  objectPosition?: string;
}

interface Props {
  photos: PhotoItem[];
  columns?: 2 | 3 | 4;
  aspectRatio?: '16/9' | '4/3' | '1/1';
}

const { photos, columns = 3, aspectRatio = '16/9' } = Astro.props;

const gridClasses = {
  2: 'md:grid-cols-2',
  3: 'md:grid-cols-3',
  4: 'md:grid-cols-2 lg:grid-cols-4',
};

const aspectClasses = {
  '16/9': 'aspect-[16/9]',
  '4/3': 'aspect-[4/3]',
  '1/1': 'aspect-square',
};
---

<div class:list={['grid gap-4', gridClasses[columns]]}>
  {photos.map((photo, index) => (
    <div class:list={['photo-item animate-on-scroll', `delay-${index * 100}`]}>
      <div class:list={['photo-wrapper', aspectClasses[aspectRatio]]}>
        <img
          src={photo.src}
          alt={photo.alt}
          class="photo-image"
          style={photo.objectPosition ? `object-position: ${photo.objectPosition};` : ''}
        />
        {photo.label && (
          <div class="photo-overlay">
            <span class="photo-label">{photo.label}</span>
          </div>
        )}
      </div>
    </div>
  ))}
</div>

<style>
  .photo-item {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
  }

  .photo-wrapper {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .photo-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .photo-item:hover .photo-image {
    transform: scale(1.1);
  }

  .photo-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 50%);
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 1.5rem;
  }

  .photo-label {
    font-size: 1.25rem;
    font-weight: 700;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
</style>
