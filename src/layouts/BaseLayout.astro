---
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description = 'FNE International partners with communities in developing nations to advance housing, health, and education.' } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | FNE International</title>
  </head>
  <body class="min-h-screen flex flex-col">
    <!-- Under Construction Banner -->
    <div id="construction-banner" class="bg-[#F7931E] text-white py-3 px-4 text-center text-sm font-medium relative">
      <div class="max-w-7xl mx-auto flex items-center justify-center gap-2">
        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <span>This website is currently under construction. Some features may be incomplete.</span>
        <button id="close-banner" class="absolute right-4 top-1/2 -translate-y-1/2 p-1 hover:bg-white/20 rounded transition-colors" aria-label="Dismiss banner">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>

    <Header />
    <main class="flex-grow">
      <slot />
    </main>
    <Footer />

    <script>
      // Construction banner dismissal
      const banner = document.getElementById('construction-banner');
      const closeBtn = document.getElementById('close-banner');

      if (localStorage.getItem('construction-banner-dismissed')) {
        banner?.remove();
      }

      closeBtn?.addEventListener('click', () => {
        banner?.remove();
        localStorage.setItem('construction-banner-dismissed', 'true');
      });

      // Scroll animation observer
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
          }
        });
      }, observerOptions);

      // Observe all elements with scroll animation classes
      document.querySelectorAll('.animate-on-scroll, .animate-slide-left, .animate-slide-right').forEach(el => {
        observer.observe(el);
      });
    </script>
  </body>
</html>
