---
import BaseLayout from '../../layouts/BaseLayout.astro';
import HeroSection from '../../components/HeroSection.astro';
import Section from '../../components/Section.astro';
import Container from '../../components/Container.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import CTASection from '../../components/CTASection.astro';
import BlogPostsSection from '../../components/BlogPostsSection.astro';
import StatCard from '../../components/StatCard.astro';
import PhotoCard from '../../components/PhotoCard.astro';

const stats = [
  { value: '2', label: 'Local Partners', icon: 'M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' },
  { value: '400+', label: 'Patients Served', icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z' },
  { value: '50+', label: 'Cataract Surgeries', icon: 'M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z' },
  { value: '1', label: 'Health Center', icon: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4' },
];

const partners = [
  {
    name: 'Asociación Wiñaypaq',
    location: 'Cusco',
    focus: 'Community Health & Development',
    description: 'Led by Dr. Francisco Morales, Wiñaypaq coordinates FNE\'s medical brigades in the Sacred Valley. They serve indigenous Quechua-speaking communities throughout the Cusco region.',
    services: ['Medical brigade coordination', 'Community outreach', 'Health education', 'Local partnership building'],
  },
  {
    name: 'Sights on Health',
    location: 'Sacred Valley',
    focus: 'Vision Care & Cataract Surgery',
    description: 'Our partner for specialized eye care, providing cataract surgeries and vision services to patients who would otherwise have no access to ophthalmological care.',
    services: ['Cataract surgery', 'Eye examinations', 'Vision screening', 'Post-operative care'],
  },
];

const healthServices = [
  { name: 'Primary Care', description: 'General health assessments and treatment' },
  { name: 'Pediatrics', description: 'Healthcare for children and infants' },
  { name: 'Cataract Surgery', description: 'Sight-restoring procedures for adults' },
  { name: 'Physical Therapy', description: 'Rehabilitation and mobility support' },
  { name: 'Eye Care', description: 'Vision screening and eye health' },
  { name: 'Patient Education', description: 'Health literacy and prevention' },
];

---

<BaseLayout title="Peru Programs" breadcrumbs={[{ label: 'Programs', href: '/programs' }, { label: 'Peru' }]}>
  <!-- Hero Section -->
  <HeroSection
    badge="Peru"
    title="Programs in"
    titleAccent="Peru"
    subtitle="Partnering with Asociación Wiñaypaq to bring medical brigades and healthcare services to indigenous communities in Cusco's Sacred Valley."
    image="/health.jpg"
    imageAlt="Medical brigade in Peru's Sacred Valley"
  />

  <!-- Quick Stats -->
  <Section background="white" padding="sm">
    <Container>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {stats.map((stat, index) => (
          <StatCard
            value={stat.value}
            label={stat.label}
            icon={stat.icon}
            animationDelay={(index + 1) * 100}
          />
        ))}
      </div>
    </Container>
  </Section>

  <!-- Peru Photo Banner -->
  <Section background="gray" spacing="small">
    <div class="w-full overflow-hidden">
      <div class="photo-grid photo-grid-4 max-w-7xl mx-auto px-4">
        <PhotoCard image="/peru/andes-landscape.jpg" alt="Laguna Melococha in the Peruvian Andes" />
        <PhotoCard image="/peru/team-arriving.jpg" alt="Medical brigade team arriving at rural village" animationDelay={100} />
        <PhotoCard image="/peru/community-gathering.jpg" alt="Community gathering for health education session" animationDelay={200} />
        <PhotoCard image="/peru/volunteer-team.jpg" alt="Volunteer team with students at local school" animationDelay={300} />
      </div>
    </div>
  </Section>

  <!-- About Peru -->
  <Section background="white">
    <Container size="md">
      <SectionHeader
        label="About Our Work"
        title="The Sacred"
        titleAccent="Valley"
        subtitle="Our Peru programs focus on the Cusco region, serving indigenous Quechua-speaking communities in the high Andes."
        labelColor="teal"
      />

      <div class="grid md:grid-cols-2 gap-8 mb-8">
        <div class="info-card animate-slide-left">
          <div class="info-card-icon">
            <div class="icon-3d">
              <div class="icon-3d-inner animate-rotate-3d">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </div>
            </div>
          </div>
          <h3 class="text-lg font-bold text-gray-900 mb-4">Cusco Region</h3>
          <p class="text-gray-600 mb-5">High in the Peruvian Andes, the Sacred Valley is home to indigenous communities where access to healthcare is limited. Many villages are hours from the nearest medical facility.</p>
          <ul class="space-y-3 text-sm text-gray-600">
            <li class="flex items-start gap-2">
              <span class="text-[#2D8B4E] font-bold">Location:</span>
              <span>Sacred Valley, Cusco</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-[#2D8B4E] font-bold">Communities:</span>
              <span>Quechua-speaking villages</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-[#2D8B4E] font-bold">Health Center:</span>
              <span>Centro de Salud Pisac</span>
            </li>
          </ul>
        </div>
        <div class="info-card animate-slide-right">
          <div class="info-card-icon info-card-icon-orange">
            <div class="icon-float">
              <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </div>
          </div>
          <h3 class="text-lg font-bold text-gray-900 mb-4">Medical Brigades</h3>
          <p class="text-gray-600 mb-5">Each June and July, FNE sends week-long mobile medical clinics to the Andes. Working with local partner Asociación Wiñaypaq, we bring healthcare directly to remote villages.</p>
          <span class="text-sm font-semibold text-[#2D8B4E]">Our Partner</span>
          <p class="text-sm text-gray-600 mt-1">Asociación Wiñaypaq, led by Dr. Francisco Morales, coordinates all brigade logistics and community relationships.</p>
        </div>
      </div>

      <!-- Interactive Map -->
      <div class="animate-on-scroll">
        <div id="peru-map" class="peru-map rounded-2xl overflow-hidden shadow-lg border border-[#2D8B4E]/20"></div>
      </div>
    </Container>
  </Section>

  <!-- Health Programs -->
  <Section background="gray" id="health">
    <Container>
      <SectionHeader
        label="Health"
        title="Medical"
        titleAccent="Brigades"
        subtitle="Each summer, FNE sends week-long mobile medical clinics to Cusco's Sacred Valley, providing healthcare to communities with limited access."
        labelColor="orange"
      />

      <!-- Services We Provide -->
      <div class="grid md:grid-cols-3 gap-4 mb-12">
        {healthServices.map((service, index) => (
          <div class={`bg-gray-50 rounded-xl p-5 animate-on-scroll delay-${(index + 1) * 50}`}>
            <div class="flex items-center gap-3 mb-2">
              <div class="w-8 h-8 rounded-lg bg-[#2D8B4E]/10 flex items-center justify-center flex-shrink-0">
                <svg class="w-4 h-4 text-[#2D8B4E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h4 class="font-semibold text-gray-900">{service.name}</h4>
            </div>
            <p class="text-sm text-gray-600 pl-11">{service.description}</p>
          </div>
        ))}
      </div>

      <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm animate-on-scroll">
        <p class="text-gray-600 leading-relaxed">
          Working from Centro de Salud Pisac, our volunteer medical professionals provide primary care, pediatric services, and specialized treatments including cataract surgeries in partnership with Sights on Health. Over 50 patients have received sight-restoring cataract surgery through this program.
        </p>
      </div>
    </Container>
  </Section>

  <!-- Health Brigade Gallery -->
  <!--
  <Section background="gray" spacing="small">
    <Container>
      <div class="text-center mb-8">
        <h3 class="text-xl font-bold text-gray-900">Medical Brigades in Action</h3>
        <p class="text-gray-600">Bringing healthcare to remote communities</p>
      </div>
      <div class="photo-showcase">
        <div class="photo-showcase-large animate-slide-left">
          <div class="image-placeholder image-placeholder-wide">
            <svg class="image-placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <span class="image-placeholder-text">Medical brigade setup in rural Cusco village with patients waiting</span>
          </div>
        </div>
        <div class="photo-showcase-grid">
          <div class="animate-slide-right delay-100">
            <div class="image-placeholder">
              <svg class="image-placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span class="image-placeholder-text">Doctor examining patient during brigade</span>
            </div>
          </div>
          <div class="animate-slide-right delay-200">
            <div class="image-placeholder">
              <svg class="image-placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span class="image-placeholder-text">Pharmacy station distributing medications</span>
            </div>
          </div>
          <div class="animate-slide-right delay-300">
            <div class="image-placeholder">
              <svg class="image-placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span class="image-placeholder-text">Health education presentation to community</span>
            </div>
          </div>
          <div class="animate-slide-right delay-400">
            <div class="image-placeholder">
              <svg class="image-placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span class="image-placeholder-text">Children receiving vitamins and checkups</span>
            </div>
          </div>
        </div>
      </div>
    </Container>
  </Section>
  -->
  <!-- Our Partners -->
  <Section background="white" id="partners">
    <Container>
      <SectionHeader
        label="Partnerships"
        title="Our Local"
        titleAccent="Partners"
        subtitle="Our Peru programs succeed through strong partnerships with local organizations who understand the communities we serve."
        labelColor="green"
      />

      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        {partners.map((partner, index) => (
          <div class={`bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden animate-on-scroll delay-${(index + 1) * 100}`}>
            <div class="h-48 bg-gradient-to-br from-[#2D8B4E]/10 to-[#3D9A8B]/10 flex items-center justify-center">
              <div class="w-16 h-16 rounded-full bg-white shadow-sm flex items-center justify-center">
                <svg class="w-8 h-8 text-[#2D8B4E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
              </div>
            </div>
            <div class="p-6">
              <div class="flex items-center gap-2 mb-2">
                <h3 class="text-lg font-bold text-gray-900">{partner.name}</h3>
              </div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-xs font-medium text-[#F7931E] bg-[#F7931E]/10 px-2 py-1 rounded-full">{partner.location}</span>
                <span class="text-xs text-gray-500">{partner.focus}</span>
              </div>
              <p class="text-gray-600 text-sm mb-4">{partner.description}</p>
              <div class="flex flex-wrap gap-2">
                {partner.services.slice(0, 3).map((service) => (
                  <span class="text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full">{service}</span>
                ))}
              </div>
            </div>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Blog Posts Section -->
  <BlogPostsSection
    title="Stories from Peru"
    subtitle="Read about the impact our partnerships are making in Peruvian communities."
    label="From Our Blog"
    limit={3}
  />

  <!-- Get Involved CTA -->
  <CTASection
    title="Support Our Peru Programs"
    subtitle="Your support helps us strengthen our partnerships and expand our reach across Peru."
    primaryButtonText="Join a Medical Brigade"
    primaryButtonLink="/get-involved/trips"
    secondaryButtonText="Donate Now"
    secondaryButtonLink="/donate"
  />
</BaseLayout>

<style>
  /* Info cards */
  .info-card {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    border: 1px solid rgba(45, 139, 78, 0.1);
  }

  .info-card-icon {
    width: 72px;
    height: 72px;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, rgba(45, 139, 78, 0.1), rgba(61, 154, 139, 0.1));
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2D8B4E;
  }

  .info-card-icon-orange {
    background: linear-gradient(135deg, rgba(247, 147, 30, 0.1), rgba(45, 139, 78, 0.1));
    color: #F7931E;
  }

  .partnership-highlight {
    background: rgba(45, 139, 78, 0.05);
    padding: 1.25rem;
    border-radius: 12px;
    border-left: 3px solid #2D8B4E;
  }

  /* Region cards with images */
  .region-card {
    background: white;
    border-radius: 20px;
    border: 1px solid rgba(45, 139, 78, 0.1);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .region-card:hover {
    border-color: rgba(45, 139, 78, 0.3);
    box-shadow: 0 10px 30px rgba(45, 139, 78, 0.1);
    transform: translateY(-4px);
  }

  .region-image-wrapper .image-placeholder {
    border-radius: 0;
    border: none;
    border-bottom: 2px dashed rgba(45, 139, 78, 0.2);
  }

  .region-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }

  .region-content {
    padding: 2rem;
    position: relative;
  }

  .region-icon {
    position: absolute;
    top: -22px;
    right: 1.5rem;
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #F7931E, #ff6b00);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 6px 16px rgba(247, 147, 30, 0.3);
  }

  .region-header {
    margin-bottom: 0.5rem;
  }

  .region-type {
    display: inline-block;
    font-size: 0.75rem;
    color: #666;
    background: #f5f5f5;
    padding: 0.375rem 0.875rem;
    border-radius: 9999px;
    margin-top: 0.25rem;
  }

  .region-partner {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 1rem;
    background: rgba(45, 139, 78, 0.05);
    border-radius: 12px;
  }

  .program-tag {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: rgba(45, 139, 78, 0.08);
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    color: #2D8B4E;
  }

  /* Partner cards with images */
  .partner-card {
    display: grid;
    gap: 2rem;
    background: white;
    padding: 0;
    border-radius: 24px;
    border: 1px solid rgba(45, 139, 78, 0.1);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  @media (min-width: 768px) {
    .partner-card {
      grid-template-columns: 300px 1fr;
    }

    .partner-card-reverse {
      grid-template-columns: 1fr 300px;
    }

    .partner-card-reverse .partner-image-wrapper {
      order: 2;
    }
  }

  .partner-card:hover {
    border-color: rgba(45, 139, 78, 0.2);
    box-shadow: 0 10px 40px rgba(45, 139, 78, 0.1);
  }

  .partner-image-wrapper .image-placeholder {
    height: 100%;
    min-height: 200px;
    border-radius: 0;
    border: none;
  }

  .partner-content {
    padding: 2rem;
    position: relative;
  }

  .partner-icon {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    width: 56px;
    height: 56px;
    border-radius: 16px;
    background: linear-gradient(135deg, rgba(45, 139, 78, 0.1), rgba(247, 147, 30, 0.1));
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2D8B4E;
  }

  .partner-location {
    font-size: 0.75rem;
    color: white;
    background: #3D9A8B;
    padding: 0.375rem 0.875rem;
    border-radius: 9999px;
  }

  .partner-focus {
    font-size: 0.875rem;
    font-weight: 600;
    color: #F7931E;
  }

  .service-tag {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: rgba(61, 154, 139, 0.08);
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    color: #3D9A8B;
  }

  /* Infrastructure cards with images */
  .infrastructure-card {
    background: white;
    border-radius: 20px;
    border: 1px solid rgba(45, 139, 78, 0.1);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .infrastructure-card:hover {
    border-color: rgba(45, 139, 78, 0.3);
    box-shadow: 0 10px 30px rgba(45, 139, 78, 0.1);
    transform: translateY(-4px);
  }

  .infrastructure-image-wrapper .image-placeholder {
    border-radius: 0;
    border: none;
    border-bottom: 2px dashed rgba(45, 139, 78, 0.2);
  }

  .infrastructure-content {
    padding: 2rem;
    position: relative;
  }

  .infrastructure-icon {
    position: absolute;
    top: -22px;
    right: 1.5rem;
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #2D8B4E, #3D9A8B);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 6px 16px rgba(45, 139, 78, 0.3);
  }

  .infrastructure-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.75rem;
  }

  .infrastructure-location {
    font-size: 0.75rem;
    color: #666;
    background: #f5f5f5;
    padding: 0.375rem 0.875rem;
    border-radius: 9999px;
  }

  .infrastructure-impact {
    display: inline-block;
    font-size: 0.875rem;
    font-weight: 600;
    color: #2D8B4E;
    margin-top: 0.5rem;
  }

  /* Health focus section */
  .health-focus-section {
    position: relative;
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 32px;
    box-shadow: 0 20px 60px rgba(45, 139, 78, 0.1);
    overflow: hidden;
  }

  .health-icon-wrapper {
    margin-bottom: 2rem;
  }

  .health-icon {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    background: linear-gradient(135deg, rgba(247, 147, 30, 0.1), rgba(45, 139, 78, 0.1));
    border-radius: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #F7931E;
    border: 2px solid rgba(247, 147, 30, 0.2);
  }

  .health-stat-box {
    padding: 1.5rem;
    background: linear-gradient(135deg, rgba(45, 139, 78, 0.05), rgba(247, 147, 30, 0.05));
    border-radius: 20px;
  }

  .health-stat-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto 1rem;
    background: white;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2D8B4E;
    border: 1px solid rgba(45, 139, 78, 0.1);
  }

  .health-stat-number {
    font-size: 2rem;
    font-weight: 900;
    background: linear-gradient(135deg, #2D8B4E, #F7931E);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .health-stat-label {
    font-size: 0.875rem;
    color: #666;
    margin-top: 0.5rem;
  }

  .health-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.1;
    pointer-events: none;
  }

  .health-orb-1 {
    width: 200px;
    height: 200px;
    background: #2D8B4E;
    top: -50px;
    left: -50px;
    animation: float 8s ease-in-out infinite;
  }

  .health-orb-2 {
    width: 150px;
    height: 150px;
    background: #F7931E;
    bottom: -30px;
    right: -30px;
    animation: float 6s ease-in-out infinite reverse;
  }

  /* Photo showcase */
  .photo-showcase {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .photo-showcase {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      gap: 1.5rem;
      align-items: stretch;
    }
  }

  .photo-showcase-large .image-placeholder {
    height: 100%;
    min-height: 320px;
  }

  .photo-showcase-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: 1fr 1fr;
    gap: 1rem;
    height: 100%;
  }

  .photo-showcase-grid .image-placeholder {
    height: 100%;
    min-height: 150px;
  }

  /* CTA Section */
  .cta-section {
    position: relative;
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 32px;
    border: 1px solid rgba(45, 139, 78, 0.1);
    overflow: hidden;
  }

  .cta-icon-wrapper {
    display: flex;
    justify-content: center;
  }

  .cta-icon {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(247, 147, 30, 0.15), rgba(45, 139, 78, 0.15));
    border-radius: 24px;
    color: #F7931E;
    border: 2px solid rgba(247, 147, 30, 0.2);
  }

  .cta-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.15;
    pointer-events: none;
  }

  .cta-orb-1 {
    width: 300px;
    height: 300px;
    background: #2D8B4E;
    top: -100px;
    right: -100px;
    animation: float 8s ease-in-out infinite;
  }

  .cta-orb-2 {
    width: 200px;
    height: 200px;
    background: #F7931E;
    bottom: -50px;
    left: -50px;
    animation: float 6s ease-in-out infinite reverse;
  }

  /* Leaflet Map Styles */
  .peru-map {
    height: 400px;
    width: 100%;
    background: #f0fdf4;
  }

  @media (max-width: 640px) {
    .peru-map {
      height: 300px;
    }
  }
</style>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

<!-- Leaflet JS -->
<script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize the map centered on Cusco/Sacred Valley region
    const map = L.map('peru-map', {
      scrollWheelZoom: false
    }).setView([-13.35, -72.05], 9);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // Custom green marker icon
    const greenIcon = L.divIcon({
      className: 'custom-marker',
      html: `<div style="
        background: linear-gradient(135deg, #2D8B4E, #3d9a8b);
        width: 28px;
        height: 28px;
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        border: 3px solid white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      "></div>`,
      iconSize: [28, 28],
      iconAnchor: [14, 28],
      popupAnchor: [0, -28]
    });

    // Custom orange marker for health center
    const orangeIcon = L.divIcon({
      className: 'custom-marker',
      html: `<div style="
        background: linear-gradient(135deg, #F7931E, #ff6b00);
        width: 28px;
        height: 28px;
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        border: 3px solid white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      "></div>`,
      iconSize: [28, 28],
      iconAnchor: [14, 28],
      popupAnchor: [0, -28]
    });

    // Program locations in Cusco region
    const locations = [
      {
        name: 'Cusco City',
        coords: [-13.5319, -71.9675],
        partner: 'Asociación Wiñaypaq',
        desc: 'Regional coordination with Dr. Francisco Morales',
        icon: greenIcon
      },
      {
        name: 'Centro de Salud Pisac',
        coords: [-13.4167, -71.8500],
        partner: 'Health Center',
        desc: 'Primary base for medical brigades serving the Sacred Valley',
        icon: orangeIcon
      }
    ];

    // Add markers for each location
    locations.forEach(function(location) {
      L.marker(location.coords, { icon: location.icon })
        .addTo(map)
        .bindPopup(`
          <div style="text-align: center; min-width: 180px;">
            <strong style="color: #2D8B4E; font-size: 15px;">${location.name}</strong>
            <p style="margin: 6px 0 4px; font-size: 11px; color: #F7931E; font-weight: 600;">${location.partner}</p>
            <p style="margin: 4px 0 0; font-size: 12px; color: #666;">${location.desc}</p>
          </div>
        `);
    });

    // Enable scroll wheel zoom when map is clicked
    map.on('click', function() {
      map.scrollWheelZoom.enable();
    });

    // Disable when mouse leaves
    map.on('mouseout', function() {
      map.scrollWheelZoom.disable();
    });
  });
</script>
