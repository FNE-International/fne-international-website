---
import BaseLayout from '../../layouts/BaseLayout.astro';
import HeroSection from '../../components/HeroSection.astro';
import Section from '../../components/Section.astro';
import Container from '../../components/Container.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import CTASection from '../../components/CTASection.astro';
import BlogPostsSection from '../../components/BlogPostsSection.astro';
import StatCard from '../../components/StatCard.astro';
import PhotoCard from '../../components/PhotoCard.astro';
import ChallengeCard from '../../components/ChallengeCard.astro';
import Timeline from '../../components/Timeline.astro';
import QuoteCard from '../../components/QuoteCard.astro';
import FeatureCard from '../../components/FeatureCard.astro';

// Data ordered by page layout sequence

// 1. Quick Stats section
const stats = [
  { value: '300+', label: 'Students Enrolled', icon: 'M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z' },
  { value: '4', label: 'Classrooms', icon: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4' },
  { value: '2016', label: 'Year Started', icon: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' },
  { value: '1', label: 'Community School', icon: 'M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253' },
];

// 2. About DR section - challenges
const challenges = [
  {
    title: 'Statelessness',
    description: 'Many children of Haitian descent lack birth certificates or citizenship documents, limiting their access to public services.',
    icon: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z',
  },
  {
    title: 'Language Barriers',
    description: 'Children from Haitian families often speak Haitian Creole at home, making Spanish-language education challenging.',
    icon: 'M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129',
  },
  {
    title: 'Poverty',
    description: 'Families in the batey communities often work in sugar cane fields with limited income and job security.',
    icon: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
  },
  {
    title: 'Discrimination',
    description: 'Haitian-Dominican communities face social stigma that can exclude them from mainstream services.',
    icon: 'M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636',
  },
];

// 3. Education/FUCPE section
const schoolServices = [
  { title: 'Quality Education', description: 'Formal education for children without access to schooling', icon: 'M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253', color: 'green' as const },
  { title: 'Safe Environment', description: 'A secure space for learning and personal growth', icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z', color: 'teal' as const },
  { title: 'Community Integration', description: 'Helping children integrate into society through education', icon: 'M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z', color: 'orange' as const },
  { title: 'Nutritional Support', description: 'Nutritious meals to support learning', icon: 'M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z', color: 'green' as const },
];

// 4. Timeline section
const timelineItems = [
  { year: '2016', title: 'Partnership Begins', description: 'FNE International begins partnership with FUCPE school', icon: 'M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1' },
  { year: '2017', title: 'First Volunteer Trip', description: 'Volunteers arrive to support school operations', icon: 'M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064' },
  { year: '2018', title: 'Classroom Expansion', description: 'New classrooms built to serve more students', icon: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4' },
  { year: '2020', title: 'COVID-19 Response', description: 'Meal distribution program launched during pandemic', icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z' },
  { year: '2023', title: '300+ Students', description: 'School reaches milestone enrollment', icon: 'M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z' },
];

// 5. Health/Mending Faces section
const healthServices = [
  { title: 'Cleft Surgeries', description: 'Free cleft lip and palate surgeries', icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z', color: 'orange' as const },
  { title: 'Follow-up Care', description: 'Post-operative medical support', icon: 'M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4', color: 'teal' as const },
  { title: 'Speech Therapy', description: '9 patients treated in Santo Domingo', icon: 'M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z', color: 'green' as const },
];

const healthPartners = [
  { title: 'Mending Faces', description: 'A philanthropic organization that has acknowledged FNE International as a partner organization for facilitating collaboration for humanitarian interests.', icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z', color: 'orange' as const },
  { title: 'Cruz Jiminian Clinic', description: 'The medical facility where cleft palate surgeries are performed, providing world-class surgical care to children in need.', icon: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4', color: 'teal' as const },
];
---

<BaseLayout title="Dominican Republic Programs" breadcrumbs={[{ label: 'Programs', href: '/programs' }, { label: 'Dominican Republic' }]}>
  <!-- Hero Section -->
  <HeroSection
    badge="Dominican Republic"
    title="Programs in the"
    titleAccent="Dominican Republic"
    subtitle="Supporting education for Haitian-Dominican children through the FUCPE school in Villa Caoba, La Romana."
    image="/dominican-republic/fucpe-classroom.jpg"
    imageAlt="FUCPE students in their classroom in Villa Caoba"
  />

  <!-- Quick Stats with Animated Icons -->
  <Section background="white" padding="sm">
    <Container>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {stats.map((stat, index) => (
          <StatCard
            value={stat.value}
            label={stat.label}
            icon={stat.icon}
            animationDelay={(index + 1) * 100}
          />
        ))}
      </div>
    </Container>
  </Section>

  <!-- Photo Banner -->
  <Section background="gray" spacing="small">
    <div class="w-full overflow-hidden">
      <div class="photo-grid photo-grid-4 max-w-7xl mx-auto px-4">
        <PhotoCard image="/dominican-republic/community-1.jpg" alt="Community healthcare visit" />
        <PhotoCard image="/dominican-republic/community-2.jpg" alt="Mother and child at community event" animationDelay={100} />
        <PhotoCard image="/dominican-republic/community-3.jpg" alt="Community members with FNE volunteers" animationDelay={200} />
        <PhotoCard image="/dominican-republic/community-4.jpg" alt="Mother and daughter at clinic" animationDelay={300} />
      </div>
    </div>
  </Section>

  <!-- About Dominican Republic -->
  <Section background="gray">
    <Container>
      <SectionHeader
        label="About Dominican Republic"
        title="Education in the"
        titleAccent="Bateys"
        subtitle="Understanding the communities we serve and the challenges they face."
        labelColor="teal"
      />

      <!-- Context Card -->
      <div class="bg-white rounded-2xl p-8 mb-12 shadow-sm border border-gray-100 animate-on-scroll">
        <div class="flex items-start gap-4 mb-6">
          <div class="w-12 h-12 rounded-xl bg-[#F7931E]/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-6 h-6 text-[#F7931E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <div>
            <h3 class="text-lg font-bold text-gray-900 mb-2">What are Bateys?</h3>
            <p class="text-gray-600 leading-relaxed">
              In the Dominican Republic, "bateys" are communities that originally formed around sugar cane plantations, home to workers of Haitian descent who migrated for agricultural labor. Today, these communities face significant challenges, including limited access to education, healthcare, and legal documentation.
            </p>
          </div>
        </div>
        <div class="flex items-center gap-2 text-sm">
          <span class="px-3 py-1 bg-[#F7931E]/10 text-[#F7931E] rounded-full font-medium">La Romana</span>
          <span class="text-gray-500">Villa Caoba Community</span>
        </div>
      </div>

      <!-- Challenges Grid -->
      <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">Challenges Facing These Communities</h3>
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
        {challenges.map((challenge, index) => (
          <div class={`bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-on-scroll delay-${(index + 1) * 100}`}>
            <div class="w-12 h-12 rounded-xl bg-[#2D8B4E]/10 flex items-center justify-center mb-4">
              <svg class="w-6 h-6 text-[#2D8B4E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={challenge.icon} />
              </svg>
            </div>
            <h4 class="font-bold text-gray-900 mb-2">{challenge.title}</h4>
            <p class="text-gray-600 text-sm">{challenge.description}</p>
          </div>
        ))}
      </div>

      <!-- Interactive Map -->
      <div class="animate-on-scroll">
        <div id="dr-map" class="dr-map rounded-2xl overflow-hidden shadow-lg border border-[#2D8B4E]/20"></div>
      </div>
    </Container>
  </Section>

  <!-- Education: FUCPE School -->
  <Section background="white" id="education">
    <Container>
      <SectionHeader
        label="Education"
        title="FUCPE"
        titleAccent="School"
        subtitle="A beacon of hope in Villa Caoba, La Romana."
        labelColor="orange"
      />

      <!-- School Image Gallery -->
      <div class="mb-12 animate-on-scroll">
        <div class="relative rounded-2xl overflow-hidden h-[400px]">
          <img
            src="/dominican-republic/fucpe-school.jpg"
            alt="FUCPE school building with colorful murals and the school logo"
            class="w-full h-full object-cover"
          />
          <div class="absolute bottom-6 left-6 bg-white rounded-xl p-4 shadow-lg">
            <div class="text-sm font-semibold text-[#2D8B4E]">Villa Caoba</div>
            <div class="text-xs text-gray-500">La Romana, Dominican Republic</div>
          </div>
        </div>
      </div>

      <!-- School Info Grid -->
      <div class="grid lg:grid-cols-3 gap-8 mb-12">
        <!-- Stats Card -->
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-on-scroll">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-[#2D8B4E]/10 flex items-center justify-center">
              <svg class="w-6 h-6 text-[#2D8B4E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <h3 class="text-lg font-bold text-gray-900">School Stats</h3>
          </div>
          <div class="space-y-4">
            <div class="flex justify-between items-center pb-3 border-b border-gray-100">
              <span class="text-gray-600">Students Enrolled</span>
              <span class="text-2xl font-bold text-[#2D8B4E]">300+</span>
            </div>
            <div class="flex justify-between items-center pb-3 border-b border-gray-100">
              <span class="text-gray-600">Classrooms</span>
              <span class="text-xl font-bold text-gray-900">4</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-gray-600">Grade Levels</span>
              <span class="text-xl font-bold text-[#3D9A8B]">K-8</span>
            </div>
          </div>
        </div>

        <!-- About Card -->
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-on-scroll delay-100">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-[#F7931E]/10 flex items-center justify-center">
              <svg class="w-6 h-6 text-[#F7931E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
              </svg>
            </div>
            <h3 class="text-lg font-bold text-gray-900">About FUCPE</h3>
          </div>
          <p class="text-gray-600 leading-relaxed text-sm">
            The FUCPE school (Fundación para la Unidad y el Crecimiento de los Pueblos) serves children from the batey community. For many, FUCPE represents their only opportunity to receive a formal education.
          </p>
        </div>

        <!-- Mission Card -->
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-on-scroll delay-200">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-[#3D9A8B]/10 flex items-center justify-center">
              <svg class="w-6 h-6 text-[#3D9A8B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </div>
            <h3 class="text-lg font-bold text-gray-900">Our Mission</h3>
          </div>
          <p class="text-gray-600 leading-relaxed text-sm">
            The school provides academic instruction, a safe space, nutritional support, and a sense of belonging for children who might otherwise be excluded from mainstream education.
          </p>
        </div>
      </div>

      <!-- What FUCPE Provides -->
      <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">What FUCPE Provides</h3>
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {schoolServices.map((service, index) => (
          <FeatureCard
            title={service.title}
            description={service.description}
            icon={service.icon}
            color={service.color}
            animationDelay={(index + 1) * 100}
          />
        ))}
      </div>
    </Container>
  </Section>

  <!-- Our Journey Timeline -->
  <Section background="gray">
    <Container>
      <SectionHeader
        label="Our Journey"
        title="Growing"
        titleAccent="Together"
        subtitle="Our partnership with FUCPE has grown steadily since 2016."
      />

      <Timeline items={timelineItems} fullWidth={true} />
    </Container>
  </Section>

  <!-- Photo Showcase - COMMENTED OUT FOR NOW
  <Section background="gray" withGrid>
    <Container>
      <SectionHeader
        label="In Action"
        title="Life at"
        titleAccent="FUCPE"
        subtitle="See the impact of education on children in Villa Caoba."
        labelColor="teal"
      />

      <div class="photo-grid photo-grid-3 max-w-4xl mx-auto">
        <PhotoCard placeholder="Students raising hands in class" caption="Engaged Learning" variant="tall" />
        <PhotoCard placeholder="Teacher helping student" caption="One-on-One Support" animationDelay={100} />
        <PhotoCard placeholder="Children at lunch time" caption="Nutritional Support" animationDelay={200} />
        <PhotoCard placeholder="Students playing outside" caption="Recess Time" animationDelay={200} />
        <PhotoCard placeholder="Student with artwork" caption="Creative Expression" variant="tall" animationDelay={300} />
      </div>
    </Container>
  </Section>
  -->

  <!-- Health Programs - Mending Faces Partnership -->
  <Section background="white" id="health">
    <Container>
      <SectionHeader
        label="Health"
        title="Mending"
        titleAccent="Faces"
        subtitle="Partnering to provide life-changing cleft palate surgeries for children in need."
        labelColor="orange"
      />

      <!-- Services Grid -->
      <div class="grid sm:grid-cols-3 gap-6 mb-12">
        {healthServices.map((service, index) => (
          <FeatureCard
            title={service.title}
            description={service.description}
            icon={service.icon}
            color={service.color}
            animationDelay={(index + 1) * 100}
          />
        ))}
      </div>

      <!-- Partners Grid -->
      <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">Our Partners</h3>
      <div class="grid sm:grid-cols-2 gap-6">
        {healthPartners.map((partner, index) => (
          <FeatureCard
            title={partner.title}
            description={partner.description}
            icon={partner.icon}
            color={partner.color}
            animationDelay={(index + 1) * 100}
          />
        ))}
      </div>
    </Container>
  </Section>

  <!-- Impact Story -->
  <Section background="gradient">
    <Container size="md">
      <QuoteCard
        quote="For children in the bateys, education isn't just about learning to read and write. It's about dignity, opportunity, and hope for a better future."
        attribution="The Heart of Our Mission"
        subtext="Every child deserves a chance"
      />
    </Container>
  </Section>

  <!-- Blog Posts Section -->
  <BlogPostsSection
    title="Stories from the DR"
    subtitle="Read about the impact our education programs are making in Dominican communities."
    label="From Our Blog"
    limit={3}
  />

  <!-- CTA -->
  <CTASection
    title="Support Education in the DR"
    subtitle="Help us provide quality education to children who need it most."
    icon="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
    primaryButtonText="Donate to FUCPE"
    primaryButtonLink="/donate"
    secondaryButtonText="Plan a Visit"
    secondaryButtonLink="/get-involved/trips"
  />
</BaseLayout>

<style>
  /* Context intro */
  .context-intro {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    border-left: 4px solid #2D8B4E;
  }

  /* School badge */
  .school-badge {
    display: inline-block;
    padding: 0.75rem 1.25rem;
    background: linear-gradient(135deg, rgba(45, 139, 78, 0.1), rgba(247, 147, 30, 0.1));
    border-radius: 12px;
    border: 1px solid rgba(45, 139, 78, 0.2);
  }

  .school-badge-text {
    font-size: 0.875rem;
    font-weight: 600;
    color: #2D8B4E;
  }

  /* School stats */
  .school-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-top: 2rem;
  }

  .school-stat {
    text-align: center;
    padding: 1.25rem;
    background: linear-gradient(135deg, rgba(45, 139, 78, 0.05), rgba(247, 147, 30, 0.05));
    border-radius: 16px;
    border: 1px solid rgba(45, 139, 78, 0.1);
    transition: all 0.3s ease;
  }

  .school-stat:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px rgba(45, 139, 78, 0.1);
  }

  .school-stat-value {
    font-size: 1.5rem;
    font-weight: 800;
    color: #2D8B4E;
  }

  .school-stat-label {
    font-size: 0.75rem;
    color: #666;
    margin-top: 0.5rem;
  }

  /* Timeline wrapper */
  .timeline {
    position: relative;
  }

  /* Leaflet Map Styles */
  .dr-map {
    height: 400px;
    width: 100%;
    background: #f0fdf4;
  }

  @media (max-width: 640px) {
    .dr-map {
      height: 300px;
    }
  }
</style>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

<!-- Leaflet JS -->
<script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize the map centered on La Romana area, Dominican Republic
    const map = L.map('dr-map', {
      scrollWheelZoom: false
    }).setView([18.45, -68.95], 11);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // Custom green marker icon
    const greenIcon = L.divIcon({
      className: 'custom-marker',
      html: `<div style="
        background: linear-gradient(135deg, #2D8B4E, #3d9a8b);
        width: 28px;
        height: 28px;
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        border: 3px solid white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      "></div>`,
      iconSize: [28, 28],
      iconAnchor: [14, 28],
      popupAnchor: [0, -28]
    });

    // Custom orange marker for La Romana city
    const orangeIcon = L.divIcon({
      className: 'custom-marker-city',
      html: `<div style="
        background: #F7931E;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      "></div>`,
      iconSize: [16, 16],
      iconAnchor: [8, 8],
      popupAnchor: [0, -8]
    });

    // FUCPE School location in Villa Caoba (batey area outside city)
    L.marker([18.41, -68.94], { icon: greenIcon })
      .addTo(map)
      .bindPopup(`
        <div style="text-align: center; min-width: 160px;">
          <strong style="color: #2D8B4E; font-size: 15px;">FUCPE School</strong>
          <p style="margin: 6px 0 4px; font-size: 11px; color: #F7931E; font-weight: 600;">Villa Caoba Batey</p>
          <p style="margin: 4px 0 0; font-size: 12px; color: #666;">Serving 300+ students from the batey community</p>
        </div>
      `);

    // La Romana city marker (city center)
    L.marker([18.427, -68.972], { icon: orangeIcon })
      .addTo(map)
      .bindPopup(`
        <div style="text-align: center;">
          <strong style="color: #F7931E; font-size: 14px;">La Romana</strong>
          <p style="margin: 8px 0 0; font-size: 12px; color: #666;">Regional city</p>
        </div>
      `);

    // Enable scroll wheel zoom when map is clicked
    map.on('click', function() {
      map.scrollWheelZoom.enable();
    });

    // Disable when mouse leaves
    map.on('mouseout', function() {
      map.scrollWheelZoom.disable();
    });
  });
</script>
